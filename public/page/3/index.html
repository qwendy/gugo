<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    
    <title>Homepage - Semantic</title>
    <link rel="stylesheet" type="text/css" href="/static/css/semantic.min.css">
    <style type="text/css">
        .hidden.menu {
            display: none;
        }
        
        .masthead.segment {
            min-height: 200px;
            padding: 1em 0em;
        }
        
        .masthead .logo.item img {
            margin-right: 1em;
        }
        
        .masthead .ui.menu .ui.button {
            margin-left: 0.5em;
        }
        
        @font-face {
            font-family: 'myHan';
            src: URL('/static/fonts/HYGuoQiangXingShuW-1.ttf') format('truetype');
        }
        
        .han {
            font-weight: normal;
            font-family: "myHan";
        }
        
        .masthead h1.ui.header {
            margin-top: 1em;
            margin-bottom: 0em;
            font-size: 2.33em;
        }
        
        .masthead h2 {
            font-size: 1.7em;
        }
        
        .ui.vertical.stripe {
            padding: 8em 0em;
        }
        
        .ui.vertical.stripe h3 {
            font-size: 2em;
        }
        
        .ui.vertical.stripe .button+h3,
        .ui.vertical.stripe p+h3 {
            margin-top: 3em;
        }
        
        .ui.vertical.stripe .floated.image {
            clear: both;
        }
        
        .ui.vertical.stripe p {
            font-size: 1.33em;
        }
        
        .ui.vertical.stripe .horizontal.divider {
            margin: 3em 0em;
        }
        
        .quote.stripe.segment {
            padding: 0em;
        }
        
        .quote.stripe.segment .grid .column {
            padding-top: 5em;
            padding-bottom: 5em;
        }
        
        .footer.segment {
            padding: 5em 0em;
        }
        
        .secondary.pointing.menu .toc.item {
            display: none;
        }
        
        @media only screen and (max-width: 700px) {
            .ui.fixed.menu {
                display: none !important;
            }
            .secondary.pointing.menu .item,
            .secondary.pointing.menu .menu {
                display: none;
            }
            .secondary.pointing.menu .toc.item {
                display: block;
            }
            .masthead.segment {
                min-height: 350px;
            }
            .masthead h1.ui.header {
                font-size: 2em;
                margin-top: 1.5em;
            }
            .masthead h2 {
                margin-top: 0.5em;
                font-size: 1.5em;
            }
        }
    </style>

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/semantic.js"></script>
    <script>
        $(document)
            .ready(function() {

                
                $('.masthead')
                    .visibility({
                        once: false,
                        onBottomPassed: function() {
                            $('.fixed.menu').transition('fade in');
                        },
                        onBottomPassedReverse: function() {
                            $('.fixed.menu').transition('fade out');
                        }
                    });

                
                $('.ui.sidebar')
                    .sidebar('attach events', '.toc.item');

            });
    </script>
</head>

<body>

    
    <div class="ui large top fixed hidden menu">
        <div class="ui container nav">
            <a class="active item">й¦–йЎµ</a></a>
            <a class="item">Category</a>
            <a class="item">ж ‡з­ѕ</a>
            <a class="item">About</a>
            <div class="right item">
                <div class="ui animated fade button" tabindex="0">
                    <div class="visible content">иµ‹ж­¤й—ґдёЂжЉ№дё№з ‚</div>
                    <div class="hidden content"><a href="">жё…з‹‚</a></div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="ui vertical inverted sidebar menu">
        <a class="active item">й¦–йЎµ</a>
        <a class="item">еЅ’жЎЈ</a>
        <a class="item">ж ‡з­ѕ</a>
        <a class="item">е…ідєЋ</a>
    </div>


    
    <div class="pusher">
        <div class="ui inverted vertical masthead center aligned segment">

            <div class="ui container">
                <div class="ui large secondary inverted pointing menu">
                    <a class="toc item">
                        <i class="sidebar icon"></i>
                    </a>
                    <div class="left item">
                        <a class="ui inverted button" href="/">жё… | з‹‚</a>
                    </div>
                    <div class="right item">
                        <a class="active item" href="/">Home</a>
                        <a class="item">е€†з±»</a>
                        <a class="item">Tags</a>
                        <a class="item">е…ідєЋж€‘</a>

                    </div>
                </div>
            </div>

            <div class="ui text container">
                <h1 class="ui inverted header">
                    <span class="han">
                    дёЌзџҐйЃ“дёєд»Ђд№€пјЊе°±жЇи¦Ѓе†™дёЂеЏҐиЇќж”ѕиї™й‡Њ!
                    </span>
                </h1>
                <h2 class="han">Do whatever you want when you want to.</h2>
            </div>

        </div>

        <div class="ui vertical stripe segment">
            <div class="ui text container">
                
                <h3 class="ui header">гЂЉGoиЇ­иЁЂењЈз»ЏгЂ‹е­¦д№ е°Џи®°пј€1пј‰</h3>
                <div class="postContent">
                    <p>и®°еЅ•гЂЉGoиЇ­иЁЂењЈз»ЏгЂ‹е­¦д№ з¬”и®°гЂ‚пј€е®ћдёєе€’й‡Ќз‚№пј‰</p>

<p>йЎєеєЏйЂљдїЎиї›зЁ‹ пј€ communicating sequential processes пјЊзј©е†™дёєCSPпј‰гЂ‚ењЁCSPдё­пјЊзЁ‹еєЏжЇдёЂз»„дё­й—ґжІЎжњ‰е…±дє«зЉ¶жЂЃзљ„е№іиЎЊиїђиЎЊзљ„е¤„зђ†иї‡зЁ‹пјЊе®ѓд»¬д№‹й—ґдЅїз”Ёз®ЎйЃ“иї›иЎЊйЂљдїЎе’ЊжЋ§е€¶еђЊж­ҐгЂ‚
GoиЇ­иЁЂзљ„е®ж–№еЌље®ў <a href="https://blog.golang.org">https://blog.golang.org</a> дјљдёЌе®љжњџеЏ‘еёѓдёЂдє›GoиЇ­иЁЂжњЂеҐЅзљ„е®ћи·µж–‡з« пјЊеЊ…ж‹¬еЅ“е‰ЌиЇ­иЁЂзљ„еЏ‘е±•зЉ¶жЂЃгЂЃжњЄжќҐ зљ„и®Ўе€’гЂЃдјљи®®жЉҐе‘Ље’ЊGoиЇ­иЁЂз›ёе…ізљ„еђ„з§Ќдјљи®®зљ„дё»йўз­‰дїЎжЃЇпј€иЇ‘жіЁпјљ <a href="http://talks.golang.org/">http://talks.golang.org/</a> еЊ…еђ«дє† е®ж–№ж”¶еЅ•зљ„еђ„з§ЌжЉҐе‘Љзљ„и®ІзЁїпј‰гЂ‚
<!-- more --></p>

<h3>з¬¬дёЂз«  е…Ґй—Ё</h3>

<p>еЇ№mapиї›иЎЊrangeеѕЄзЋЇж—¶пјЊе…¶иї­д»ЈйЎєеєЏжЇдёЌзЎ®е®љзљ„пјЊд»Ће®ћи·µжќҐзњ‹пјЊеѕ€еЏЇиѓЅжЇЏж¬ЎиїђиЎЊйѓЅдјљжњ‰дёЌдёЂж ·зљ„з»“жћњпј€иЇ‘жіЁпјљиї™жЇGoиЇ­иЁЂзљ„и®ѕи®ЎиЂ…жњ‰ж„Џдёєд№‹зљ„пјЊе› дёєе…¶еє•е±‚е®ћзЋ°дёЌдїќиЇЃжЏ’е…ҐйЎєеєЏе’ЊйЃЌеЋ†йЎєеєЏдёЂи‡ґпјЊд№џеёЊжњ›зЁ‹еєЏе‘дёЌи¦Ѓдѕќиµ–йЃЌеЋ†ж—¶зљ„йЎєеєЏпјЊж‰Ђд»Ґе№Іи„†з›ґжЋҐењЁйЃЌеЋ†зљ„ж—¶еЂ™еЃљдє†йљЏжњєеЊ–е¤„зђ†пјЊй†‰дє†гЂ‚иЎҐе……пјљеҐЅеѓЏиЇґйљЏжњєеєЏеЏЇд»ҐйІж­ўжџђз§Ќз±»ећ‹зљ„ж”»е‡»пјЊи™Ѕз„¶дёЌе¤ЄжЋз™ЅпјЊдЅ†жЇж„џи§‰иїи›®еЋ‰е®ізљ„пј‰пјЊжќҐйЃїе…ЌзЁ‹еєЏе‘ењЁдёљеЉЎдё­дѕќиµ–йЃЌеЋ†ж—¶зљ„йЎєеєЏгЂ‚
mapжЇз”Ёmakeе‡Ѕж•°е€›е»єзљ„ж•°жЌ®з»“жћ„зљ„дёЂдёЄ<strong>еј•з”Ё</strong>гЂ‚еЅ“дёЂдёЄmapиў«дЅњдёєеЏ‚ж•°дј йЂ’з»™дёЂдёЄе‡Ѕж•°ж—¶пјЊе‡Ѕж•°жЋҐж”¶е€°зљ„жЇдёЂд»Ѕ<strong>еј•з”Ёзљ„ж‹·иґќ</strong>пјЊи™Ѕз„¶жњ¬иє«е№¶дёЌжЇдёЂдёЄдёњиҐїпјЊдЅ†е› дёєд»–д»¬жЊ‡еђ‘зљ„жЇеђЊдёЂеќ—ж•°жЌ®еЇ№и±Ўпј€иЇ‘жіЁпјљз±»дјјдєЋC++й‡Њзљ„еј•з”Ёдј йЂ’пјЊе®ћй™…дёЉжЊ‡й’€жЇеЏ¦дёЂдёЄжЊ‡й’€дє†пјЊдЅ†е†…йѓЁе­зљ„еЂјжЊ‡еђ‘еђЊдёЂеќ—е†…е­пј‰пјЊж‰Ђд»ҐдЅ ењЁе‡Ѕж•°й‡ЊеЇ№mapй‡Њзљ„еЂјиї›иЎЊдї®ж”№ж—¶пјЊеЋџе§‹зљ„mapе†…зљ„еЂјд№џдјљж”№еЏгЂ‚</p>

<h3>з¬¬дєЊз«  зЁ‹еєЏз»“жћ„</h3>

<p>е¦‚жћње€ќе§‹еЊ–иЎЁиѕѕејЏиў«зњЃз•ҐпјЊй‚Јд№€е°†з”Ёй›¶еЂје€ќе§‹еЊ–иЇҐеЏй‡ЏгЂ‚ ж•°еЂјз±»ећ‹еЏй‡ЏеЇ№еє”зљ„й›¶еЂјжЇ0пјЊеёѓе°”з±»ећ‹еЏй‡ЏеЇ№еє”зљ„й›¶еЂјжЇfalseпјЊе­—з¬¦дёІз±»ећ‹еЇ№еє”зљ„й›¶еЂјжЇз©єе­—з¬¦дёІпјЊжЋҐеЏЈж€–еј•з”Ёз±»ећ‹пј€еЊ…ж‹¬sliceгЂЃmapгЂЃchanе’Ње‡Ѕж•°пј‰еЏй‡ЏеЇ№еє”зљ„й›¶еЂјжЇnilгЂ‚ж•°з»„ж€–з»“жћ„дЅ“з­‰иЃљеђ€з±»ећ‹еЇ№еє”зљ„й›¶еЂјжЇжЇЏдёЄе…ѓзґ ж€–е­—ж®µйѓЅжЇеЇ№еє”иЇҐз±»ећ‹зљ„й›¶еЂјгЂ‚
varеЅўејЏзљ„еЈ°жЋиЇ­еЏҐеѕЂеѕЂжЇз”ЁдєЋйњЂи¦ЃжѕејЏжЊ‡е®љеЏй‡Џз±»ећ‹ењ°ж–№пјЊж€–иЂ…е› дёєеЏй‡ЏзЁЌеђЋдјљиў«й‡Ќж–°иµ‹еЂјиЂЊе€ќе§‹еЂјж— е…ізґ§и¦Ѓзљ„ењ°ж–№гЂ‚
д»»дЅ•з±»ећ‹зљ„жЊ‡й’€зљ„й›¶еЂјйѓЅжЇnilгЂ‚гЂ‚е¦‚жћњp != nilжµ‹иЇ•дёєзњџпјЊй‚Јд№€pжЇжЊ‡еђ‘жџђдёЄжњ‰ж•€еЏй‡ЏгЂ‚жЊ‡й’€д№‹й—ґд№џжЇеЏЇд»Ґиї›иЎЊз›ёз­‰жµ‹иЇ•зљ„пјЊеЏЄжњ‰еЅ“е®ѓд»¬жЊ‡еђ‘еђЊдёЂдёЄеЏй‡Џж€–е…ЁйѓЁжЇnilж—¶ж‰Ќз›ёз­‰гЂ‚
жЇЏж¬Ўи°ѓз”Ёnewе‡Ѕж•°йѓЅжЇиї”е›ћдёЂдёЄж–°зљ„еЏй‡Џзљ„ењ°еќЂпјЊеЅ“з„¶д№џеЏЇиѓЅжњ‰з‰№ж®Љжѓ…е†µпјље¦‚жћњдё¤дёЄз±»ећ‹йѓЅжЇз©єзљ„пјЊд№џе°±жЇиЇґз±»ећ‹зљ„е¤§е°ЏжЇ0пјЊдѕ‹е¦‚struct{}е’Њ [0]int,жњ‰еЏЇиѓЅжњ‰з›ёеђЊзљ„ењ°еќЂпј€дѕќиµ–е…·дЅ“зљ„иЇ­иЁЂе®ћзЋ°пј‰пј€иЇ‘жіЁпјљиЇ·и°Ёж…ЋдЅїз”Ёе¤§е°Џдёє0зљ„з±»ећ‹пјЊе› дёєе¦‚жћњз±»ећ‹зљ„е¤§е°Џдёє0зљ„иЇќпјЊеЏЇиѓЅеЇји‡ґGoиЇ­иЁЂзљ„и‡ЄеЉЁећѓењѕе›ћж”¶е™Ёжњ‰дёЌеђЊзљ„иЎЊдёєпјЊе…·дЅ“иЇ·жџҐзњ‹runtime.SetFinalizerе‡Ѕж•°з›ёе…іж–‡жЎЈпј‰гЂ‚</p>

<h3>з¬¬дё‰з«  еџєзЎЂж•°жЌ®з±»ећ‹</h3>

<p>дёЂдёЄе­—з¬¦дёІжЇдёЂдёЄдёЌеЏЇж”№еЏзљ„е­—иЉ‚еєЏе€—гЂ‚е†…зЅ®зљ„lenе‡Ѕж•°еЏЇд»Ґиї”е›ћдёЂдёЄе­—з¬¦дёІдё­зљ„е­—иЉ‚ж•°з›®пј€дёЌжЇruneе­—з¬¦ж•°з›®пј‰пјЊзґўеј•ж“ЌдЅњs[i]иї”е›ћз¬¬iдёЄе­—иЉ‚зљ„е­—иЉ‚еЂјпјЊiеї…йЎ»ж»Ўи¶і0 в‰¤ i&lt; len(s)жќЎд»¶зє¦жќџгЂ‚е­—з¬¦дёІзљ„еЂјжЇдёЌеЏЇеЏзљ„пјљдёЂдёЄе­—з¬¦дёІеЊ…еђ«зљ„е­—иЉ‚еєЏе€—ж°ёиїњдёЌдјљиў«ж”№еЏпјЊеЅ“з„¶ж€‘д»¬д№џеЏЇд»Ґз»™дёЂдёЄе­—з¬¦дёІеЏй‡Џе€†й…ЌдёЂдёЄж–°е­—з¬¦дёІеЂјгЂ‚еЏЇд»ҐеѓЏдё‹йќўиї™ж ·е°†дёЂдёЄе­—з¬¦дёІиїЅеЉ е€°еЏ¦дёЂдёЄе­—з¬¦дёІпјљ</p>

<pre><span class="pln">s</span> <span class="pun">:</span><span class="pun">=</span> <span class="str">&#34;left foot&#34;</span>
<span class="pln">t</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">s</span>
<span class="pln">s</span> <span class="pun">+</span><span class="pun">=</span> <span class="str">&#34;, right foot&#34;</span>
</pre>

<p>иї™е№¶дёЌдјљеЇји‡ґеЋџе§‹зљ„е­—з¬¦дёІеЂјиў«ж”№еЏпјЊдЅ†жЇеЏй‡Џsе°†е› дёє+=иЇ­еЏҐжЊЃжњ‰дёЂдёЄж–°зљ„е­—з¬¦дёІеЂјпјЊдЅ†жЇtдѕќз„¶жЇеЊ…еђ«еЋџе…€зљ„е­—з¬¦дёІеЂјгЂ‚
GoиЇ­иЁЂзљ„еёёй‡Џжњ‰дёЄдёЌеђЊеЇ»еёёд№‹е¤„гЂ‚и™Ѕз„¶дёЂдёЄеёёй‡ЏеЏЇд»Ґжњ‰д»»ж„Џжњ‰дёЂдёЄзЎ®е®љзљ„еџєзЎЂз±»ећ‹пјЊдѕ‹е¦‚intж€–float64пјЊж€–иЂ…жЇз±»дјјtime.Durationиї™ж ·е‘ЅеђЌзљ„еџєзЎЂз±»ећ‹пјЊдЅ†жЇи®ёе¤љеёёй‡Џе№¶жІЎжњ‰дёЂдёЄжЋзЎ®зљ„еџєзЎЂз±»ећ‹гЂ‚зј–иЇ‘е™Ёдёєиї™дє›жІЎжњ‰жЋзЎ®зљ„еџєзЎЂз±»ежЇз±»дјјtime.Durationиї™ж ·е‘ЅеђЌзљ„еџєзЎЂз±»ећ‹пјЊдЅ†жЇи®ёе¤љеёёй‡Џе№¶жІЎжњ‰дёЂдёЄжЋзЎ®зљ„еџєзЎЂз±»ећ‹гЂ‚зј–иЇ‘е™Ёдёєиї™дє›жІЎжњ‰жЋзЎ®зљ„еџєзЎЂз±»ећ‹зљ„ж•°е­—еёёй‡ЏжЏђдѕ›жЇ”еџєзЎЂз±»ећ‹ж›ґй«зІѕеє¦зљ„з®—жњЇиїђз®—гЂ‚
ж— з±»ећ‹зљ„еёёй‡ЏдёЌд»…еЏЇд»ҐжЏђдѕ›ж›ґй«зљ„иїђз®—зІѕеє¦пјЊиЂЊдё”еЏЇд»Ґз›ґжЋҐз”ЁдєЋж›ґе¤љзљ„иЎЁиѕѕејЏиЂЊдёЌйњЂи¦ЃжѕејЏзљ„з±»ећ‹иЅ¬жЌўгЂ‚
дѕ‹е¦‚mathеЊ…дё­зљ„Piеёёй‡Џпјљ</p>

<pre>	<span class="typ">Pi</span>  <span class="pun">=</span> <span class="dec">3.14159265358979323846264338327950288419716939937510582097494459</span> <span class="com">//http://oeis.org/A000796</span>
</pre>

<h3>з¬¬е››з«  з¬¦еђ€ж•°жЌ®з±»ећ‹</h3>

<h4>ж•°з»„</h4>

<p>ењЁж•°з»„е­—йќўеЂјдё­пјЊе¦‚жћњењЁж•°з»„зљ„й•їеє¦дЅЌзЅ®е‡єзЋ°зљ„жЇвЂњвЂ¦вЂќзњЃз•ҐеЏ·пјЊе€™иЎЁз¤єж•°з»„зљ„й•їеє¦жЇж №жЌ®е€ќе§‹еЊ–еЂјзљ„дёЄж•°жќҐи®Ўз®—гЂ‚ж•°з»„зљ„й•їеє¦еї…йЎ»жЇеёёй‡ЏиЎЁиѕѕејЏпјЊе› дёєж•°з»„зљ„й•їеє¦йњЂи¦ЃењЁзј–иЇ‘й¶ж®µзЎ®е®љгЂ‚</p>

<pre><span class="pln">q</span> <span class="pun">:</span><span class="pun">=</span> <span class="pun">[</span><span class="pun">.</span><span class="pun">.</span><span class="pun">.</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">{</span><span class="dec">1</span><span class="pun">,</span> <span class="dec">2</span><span class="pun">,</span> <span class="dec">3</span><span class="pun">}</span>
<span class="pln">fmt</span><span class="pun">.</span><span class="typ">Printf</span><span class="pun">(</span><span class="str">&#34;%T\n&#34;</span><span class="pun">,</span> <span class="pln">q</span><span class="pun">)</span> <span class="com">// &#34;[3]int&#34;</span>
</pre>

<p>д№џеЏЇд»ҐжЊ‡е®љдёЂдёЄзґўеј•е’ЊеЇ№еє”еЂје€—иЎЁзљ„ж–№ејЏе€ќе§‹еЊ–пјЊе°±еѓЏдё‹йќўиї™ж ·пјљ</p>

<pre><span class="kwd">type</span> <span class="typ">Currency</span> <span class="kwd">int</span>

<span class="kwd">const</span> <span class="pun">(</span>
	<span class="typ">USD</span> <span class="typ">Currency</span> <span class="pun">=</span> <span class="pln">iota</span> <span class="com">// зѕЋе…ѓ</span>
	<span class="typ">EUR</span>                 <span class="com">// ж¬§е…ѓ</span>
	<span class="typ">GBP</span>                 <span class="com">// и‹±й•‘</span>
	<span class="typ">RMB</span>                 <span class="com">// дєєж°‘еёЃ</span>
<span class="pun">)</span>
<span class="pln">symbol</span> <span class="pun">:</span><span class="pun">=</span> <span class="pun">[</span><span class="pun">.</span><span class="pun">.</span><span class="pun">.</span><span class="pun">]</span><span class="pln">string</span><span class="pun">{</span><span class="typ">USD</span><span class="pun">:</span> <span class="str">&#34;$&#34;</span><span class="pun">,</span> <span class="typ">EUR</span><span class="pun">:</span> <span class="str">&#34;в‚¬&#34;</span><span class="pun">,</span> <span class="typ">GBP</span><span class="pun">:</span> <span class="str">&#34;пїЎ&#34;</span><span class="pun">,</span> <span class="typ">RMB</span><span class="pun">:</span> <span class="str">&#34;пїҐ&#34;</span><span class="pun">}</span>
<span class="pln">fmt</span><span class="pun">.</span><span class="typ">Println</span><span class="pun">(</span><span class="typ">RMB</span><span class="pun">,</span> <span class="pln">symbol</span><span class="pun">[</span><span class="typ">RMB</span><span class="pun">]</span><span class="pun">)</span> <span class="com">// &#34;3 пїҐ&#34;</span>
</pre>

<p>е¦‚жћњдёЂдёЄж•°з»„зљ„е…ѓзґ з±»ећ‹жЇеЏЇд»Ґз›ёдє’жЇ”иѕѓзљ„пјЊй‚Јд№€ж•°з»„з±»ећ‹д№џжЇеЏЇд»Ґз›ёдє’жЇ”иѕѓзљ„пјЊиї™ж—¶еЂ™ж€‘д»¬еЏЇд»Ґз›ґжЋҐйЂљиї‡==жЇ”иѕѓиїђз®—з¬¦жќҐжЇ”иѕѓдё¤дёЄж•°з»„пјЊеЏЄжњ‰еЅ“дё¤дёЄж•°з»„зљ„ж‰Ђжњ‰е…ѓзґ йѓЅжЇз›ёз­‰зљ„ж—¶еЂ™ж•°з»„ж‰ЌжЇз›ёз­‰зљ„гЂ‚дёЌз›ёз­‰жЇ”иѕѓиїђз®—з¬¦!=йЃµеѕЄеђЊж ·зљ„и§„е€™гЂ‚(ж–©йЈЋжіЁ: иї™й‡Њзљ„жЇ”иѕѓд»…жЊ‡з›ёз­‰е’ЊдёЌз­‰гЂ‚<strong>е¤§дєЋе°ЏдєЋдёЌеЊ…еђ«ењЁж­¤з±»</strong>пјЊ<strong>ж•°з»„й•їеє¦з±»ећ‹еї…йЎ»з›ёеђЊ</strong>)</p>

<pre><span class="pln">a</span> <span class="pun">:</span><span class="pun">=</span> <span class="pun">[</span><span class="dec">2</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">{</span><span class="dec">1</span><span class="pun">,</span> <span class="dec">2</span><span class="pun">}</span>
<span class="pln">b</span> <span class="pun">:</span><span class="pun">=</span> <span class="pun">[</span><span class="pun">.</span><span class="pun">.</span><span class="pun">.</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">{</span><span class="dec">1</span><span class="pun">,</span> <span class="dec">2</span><span class="pun">}</span>
<span class="pln">c</span> <span class="pun">:</span><span class="pun">=</span> <span class="pun">[</span><span class="dec">2</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">{</span><span class="dec">1</span><span class="pun">,</span> <span class="dec">3</span><span class="pun">}</span>
<span class="pln">fmt</span><span class="pun">.</span><span class="typ">Println</span><span class="pun">(</span><span class="pln">a</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">b</span><span class="pun">,</span> <span class="pln">a</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">c</span><span class="pun">,</span> <span class="pln">b</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">c</span><span class="pun">)</span> <span class="com">// &#34;true false false&#34;</span>
<span class="pln">d</span> <span class="pun">:</span><span class="pun">=</span> <span class="pun">[</span><span class="dec">3</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">{</span><span class="dec">1</span><span class="pun">,</span> <span class="dec">2</span><span class="pun">}</span>
<span class="pln">fmt</span><span class="pun">.</span><span class="typ">Println</span><span class="pun">(</span><span class="pln">a</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">d</span><span class="pun">)</span> <span class="com">// compile error: cannot compare [2]int == [3]int</span>
</pre>

<h4>slice</h4>

<p>дёЂдёЄsliceжЇдёЂдёЄиЅ»й‡Џзє§зљ„ж•°жЌ®з»“жћ„пјЊжЏђдѕ›дє†и®їй—®ж•°з»„е­ђеєЏе€—пј€ж€–иЂ…е…ЁйѓЁпј‰е…ѓзґ зљ„еЉџиѓЅпјЊиЂЊдё”sliceзљ„еє•е±‚зЎ®е®ћеј•з”ЁдёЂдёЄж•°з»„еЇ№и±ЎгЂ‚дёЂдёЄsliceз”±дё‰дёЄйѓЁе€†жћ„ж€ђпјљжЊ‡й’€гЂЃй•їеє¦е’Ње®№й‡ЏгЂ‚жЊ‡й’€жЊ‡еђ‘з¬¬дёЂдёЄsliceе…ѓзґ еЇ№еє”зљ„еє•е±‚ж•°з»„е…ѓзґ зљ„ењ°еќЂпјЊи¦ЃжіЁж„Џзљ„жЇsliceзљ„з¬¬дёЂдёЄе…ѓзґ е№¶дёЌдёЂе®ље°±жЇж•°з»„зљ„з¬¬дёЂдёЄе…ѓзґ гЂ‚пј€ж–©йЈЋжіЁпјљsliceеЏЇиѓЅжЇж•°з»„зљ„дё­й—ґйѓЁе€†гЂ‚пј‰й•їеє¦еЇ№еє”sliceдё­е…ѓзґ зљ„ж•°з›®пј›й•їеє¦дёЌиѓЅи¶…иї‡е®№й‡ЏпјЊе®№й‡ЏдёЂи€¬жЇд»Ћsliceзљ„ејЂе§‹дЅЌзЅ®е€°еє•е±‚ж•°жЌ®зљ„з»“е°ѕдЅЌзЅ®гЂ‚е†…зЅ®зљ„lenе’Њcapе‡Ѕж•°е€†е€«иї”е›ћsliceзљ„й•їеє¦е’Ње®№й‡ЏгЂ‚
е¤Ќе€¶дёЂдёЄsliceеЏЄжЇеЇ№еє•е±‚зљ„ж•°з»„е€›е»єдє†дёЂдёЄж–°зљ„sliceе€«еђЌгЂ‚
е’Њж•°з»„дёЌеђЊзљ„жЇпјЊsliceд№‹й—ґдёЌиѓЅжЇ”иѕѓпјЊе› ж­¤ж€‘д»¬дёЌиѓЅдЅїз”Ё==ж“ЌдЅњз¬¦жќҐе€¤ж–­дё¤дёЄsliceжЇеђ¦еђ«жњ‰е…ЁйѓЁз›ёз­‰е…ѓзґ гЂ‚дёЌиї‡ж ‡е‡†еє“жЏђдѕ›дє†й«еє¦дјеЊ–зљ„bytes.Equalе‡Ѕж•°жќҐе€¤ж–­дё¤дёЄе­—иЉ‚ећ‹sliceжЇеђ¦з›ёз­‰пј€[]byteпј‰пјЊдЅ†жЇеЇ№дєЋе…¶д»–з±»ећ‹зљ„sliceпјЊж€‘д»¬еї…йЎ»и‡Єе·±е±•ејЂжЇЏдёЄе…ѓзґ иї›иЎЊжЇ”иѕѓгЂ‚
дёЂдёЄй›¶еЂјзљ„sliceз­‰дєЋnilгЂ‚дёЂдёЄnilеЂјзљ„sliceе№¶жІЎжњ‰еє•е±‚ж•°з»„гЂ‚дёЂдёЄnilеЂјзљ„sliceзљ„й•їеє¦е’Ње®№й‡ЏйѓЅжЇ0пјЊдЅ†жЇд№џжњ‰йќћnilеЂјзљ„sliceзљ„й•їеє¦е’Ње®№й‡Џд№џжЇ0зљ„пјЊдѕ‹е¦‚[]int{}ж€–make([]int, 3)[3:]гЂ‚дёЋд»»ж„Џз±»ећ‹зљ„nilеЂјдёЂж ·пјЊж€‘д»¬еЏЇд»Ґз”Ё[]int(nil)з±»ећ‹иЅ¬жЌўиЎЁиѕѕејЏжќҐз”џж€ђдёЂдёЄеЇ№еє”з±»ећ‹sliceзљ„nilеЂјгЂ‚</p>

<pre><span class="kwd">var</span> <span class="pln">s</span> <span class="pun">[</span><span class="pun">]</span><span class="kwd">int</span>    <span class="com">// len(s) == 0, s == nil</span>
<span class="pln">s</span> <span class="pun">=</span> <span class="kwd">nil</span>        <span class="com">// len(s) == 0, s == nil</span>
<span class="pln">s</span> <span class="pun">=</span> <span class="pun">[</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">(</span><span class="kwd">nil</span><span class="pun">)</span> <span class="com">// len(s) == 0, s == nil</span>
<span class="pln">s</span> <span class="pun">=</span> <span class="pun">[</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">{</span><span class="pun">}</span>    <span class="com">// len(s) == 0, s != nil</span>
</pre>

<p>е¦‚жћњдЅ йњЂи¦Ѓжµ‹иЇ•дёЂдёЄsliceжЇеђ¦жЇз©єзљ„пјЊдЅїз”Ёlen(s) == 0жќҐе€¤ж–­пјЊиЂЊдёЌеє”иЇҐз”Ёs == nilжќҐе€¤ж–­гЂ‚
е†…зЅ®зљ„appendе‡Ѕж•°еЏЇиѓЅдЅїз”ЁжЇ”appendIntж›ґе¤Ќжќ‚зљ„е†…е­ж‰©е±•з­–з•ҐгЂ‚е› ж­¤пјЊйЂљеёёж€‘д»¬е№¶дёЌзџҐйЃ“appendи°ѓз”ЁжЇеђ¦еЇји‡ґдє†е†…е­зљ„й‡Ќж–°е€†й…ЌпјЊе› ж­¤ж€‘д»¬д№џдёЌиѓЅзЎ®и®¤ж–°зљ„sliceе’ЊеЋџе§‹зљ„sliceжЇеђ¦еј•з”Ёзљ„жЇз›ёеђЊзљ„еє•е±‚ж•°з»„з©єй—ґгЂ‚еђЊж ·пјЊж€‘д»¬дёЌиѓЅзЎ®и®¤ењЁеЋџе…€зљ„sliceдёЉзљ„ж“ЌдЅњжЇеђ¦дјљеЅ±е“Ќе€°ж–°зљ„sliceгЂ‚е› ж­¤пјЊйЂљеёёжЇе°†appendиї”е›ћзљ„з»“жћњз›ґжЋҐиµ‹еЂјз»™иѕ“е…Ґзљ„sliceеЏй‡ЏгЂ‚</p>

<p>з»ѓд№  4.3пјљ й‡Ќе†™reverseе‡Ѕж•°пјЊдЅїз”Ёж•°з»„жЊ‡й’€д»Јж›їsliceгЂ‚</p>

<pre><span class="kwd">func</span> <span class="pln">reverseV2</span><span class="pun">(</span><span class="pln">s</span> <span class="pun">*</span><span class="pun">[</span><span class="dec">10</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">)</span> <span class="pun">{</span>
	<span class="kwd">for</span> <span class="pln">i</span><span class="pun">,</span> <span class="pln">j</span> <span class="pun">:</span><span class="pun">=</span> <span class="dec">0</span><span class="pun">,</span> <span class="dec">9</span><span class="pun">;</span> <span class="pln">i</span> <span class="pun">&lt;</span> <span class="pln">j</span><span class="pun">;</span> <span class="pln">i</span><span class="pun">,</span> <span class="pln">j</span> <span class="pun">=</span> <span class="pln">i</span><span class="pun">+</span><span class="dec">1</span><span class="pun">,</span> <span class="pln">j</span><span class="pun">-</span><span class="dec">1</span> <span class="pun">{</span>
		<span class="pun">(</span><span class="pun">*</span><span class="pln">s</span><span class="pun">)</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">,</span> <span class="pun">(</span><span class="pun">*</span><span class="pln">s</span><span class="pun">)</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span> <span class="pun">=</span> <span class="pun">(</span><span class="pun">*</span><span class="pln">s</span><span class="pun">)</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pun">,</span> <span class="pun">(</span><span class="pun">*</span><span class="pln">s</span><span class="pun">)</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span>
	<span class="pun">}</span>
<span class="pun">}</span>
</pre>

<p>з»ѓд№  4.4пјљ зј–е†™дёЂдёЄrotateе‡Ѕж•°пјЊйЂљиї‡дёЂж¬ЎеѕЄзЋЇе®Њж€ђй•џиЅ¬гЂ‚</p>

<pre><span class="kwd">func</span> <span class="pln">forwardRotate</span><span class="pun">(</span><span class="pln">s</span> <span class="pun">[</span><span class="pun">]</span><span class="kwd">int</span><span class="pun">,</span> <span class="pln">x</span> <span class="kwd">int</span><span class="pun">)</span> <span class="pun">{</span>
	<span class="pln">mid</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">x</span>
	<span class="pln">k</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">mid</span>
	<span class="kwd">for</span> <span class="pln">i</span> <span class="pun">:</span><span class="pun">=</span> <span class="dec">0</span><span class="pun">;</span> <span class="pln">i</span> <span class="pun">&lt;</span> <span class="pln">len</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">i</span><span class="pun">+</span><span class="pun">+</span> <span class="pun">{</span>
		<span class="pln">s</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">,</span> <span class="pln">s</span><span class="pun">[</span><span class="pln">k</span><span class="pun">]</span> <span class="pun">=</span> <span class="pln">s</span><span class="pun">[</span><span class="pln">k</span><span class="pun">]</span><span class="pun">,</span> <span class="pln">s</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span>
		<span class="pln">k</span><span class="pun">+</span><span class="pun">+</span>
		<span class="kwd">if</span> <span class="pln">i</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">mid</span> <span class="pun">{</span>
			<span class="kwd">if</span> <span class="pln">k</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">len</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span> <span class="pun">{</span>
				<span class="kwd">return</span>
			<span class="pun">}</span>
			<span class="pln">mid</span> <span class="pun">=</span> <span class="pln">k</span>
		<span class="pun">}</span> <span class="kwd">else</span> <span class="kwd">if</span> <span class="pln">k</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">len</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span> <span class="pun">{</span>
			<span class="pln">k</span> <span class="pun">=</span> <span class="pln">mid</span>
		<span class="pun">}</span>
	<span class="pun">}</span>
<span class="pun">}</span>
</pre>

<p>з»ѓд№  4.5пјљ е†™дёЂдёЄе‡Ѕж•°ењЁеЋџењ°е®Њж€ђж¶€й™¤[]stringдё­з›ёй‚»й‡Ќе¤Ќзљ„е­—з¬¦дёІзљ„ж“ЌдЅњгЂ‚</p>

<pre><span class="kwd">func</span> <span class="pln">noRepeatSide</span><span class="pun">(</span><span class="pln">s</span> <span class="pun">[</span><span class="pun">]</span><span class="pln">string</span><span class="pun">)</span> <span class="pun">[</span><span class="pun">]</span><span class="pln">string</span> <span class="pun">{</span>
	<span class="pln">count</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">len</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span>
	<span class="kwd">for</span> <span class="pln">i</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">range</span> <span class="pln">s</span> <span class="pun">{</span>
		<span class="kwd">if</span> <span class="pln">i</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">len</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span><span class="pun">-</span><span class="dec">1</span> <span class="pun">{</span>
			<span class="kwd">return</span> <span class="pln">s</span>
		<span class="pun">}</span>
		<span class="kwd">if</span> <span class="pln">s</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span> <span class="pun">=</span><span class="pun">=</span> <span class="pln">s</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="dec">1</span><span class="pun">]</span> <span class="pun">{</span>
			<span class="pln">s</span> <span class="pun">=</span> <span class="kwd">append</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pun">:</span><span class="pln">i</span><span class="pun">]</span><span class="pun">,</span> <span class="pln">s</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="dec">1</span><span class="pun">:</span><span class="pun">]</span><span class="pun">.</span><span class="pun">.</span><span class="pun">.</span><span class="pun">)</span>
			<span class="pln">count</span><span class="pun">-</span><span class="pun">-</span>
		<span class="pun">}</span>
	<span class="pun">}</span>
	<span class="kwd">return</span> <span class="pln">s</span>
<span class="pun">}</span>
</pre>

<h4>Map</h4>

<p>и™Ѕз„¶жµ®з‚№ж•°з±»ећ‹д№џжЇж”ЇжЊЃз›ёз­‰иїђз®—з¬¦жЇ”иѕѓзљ„пјЊдЅ†жЇе°†жµ®з‚№ж•°з”ЁеЃљkeyз±»ећ‹е€™жЇдёЂдёЄеќЏзљ„жѓіжі•пјЊж­Је¦‚з¬¬дё‰з« жЏђе€°зљ„пјЊжњЂеќЏзљ„жѓ…е†µжЇеЏЇиѓЅе‡єзЋ°зљ„NaNе’Њд»»дЅ•жµ®з‚№ж•°йѓЅдёЌз›ёз­‰гЂ‚еЇ№дєЋVеЇ№еє”зљ„valueж•°жЌ®з±»ећ‹е€™жІЎжњ‰д»»дЅ•зљ„й™ђе€¶.
mapдё­зљ„е…ѓзґ е№¶дёЌжЇдёЂдёЄеЏй‡ЏпјЊе› ж­¤ж€‘д»¬дёЌиѓЅеЇ№mapзљ„е…ѓзґ иї›иЎЊеЏ–еќЂж“ЌдЅњ.
mapдёЉзљ„е¤§йѓЁе€†ж“ЌдЅњпјЊеЊ…ж‹¬жџҐж‰ѕгЂЃе€ й™¤гЂЃlenе’ЊrangeеѕЄзЋЇйѓЅеЏЇд»Ґе®‰е…Ёе·ҐдЅњењЁnilеЂјзљ„mapдёЉпјЊе®ѓд»¬зљ„иЎЊдёєе’ЊдёЂдёЄз©єзљ„mapз±»дјјгЂ‚дЅ†жЇеђ‘дёЂдёЄnilеЂјзљ„mapе­е…Ґе…ѓзґ е°†еЇји‡ґдёЂдёЄpanicеј‚еёё.ењЁеђ‘mapе­ж•°жЌ®е‰Ќеї…йЎ»е…€е€›е»єmapгЂ‚
е’ЊsliceдёЂж ·пјЊmapд№‹й—ґд№џдёЌиѓЅиї›иЎЊз›ёз­‰жЇ”иѕѓпј›е”ЇдёЂзљ„дѕ‹е¤–жЇе’Њnilиї›иЎЊжЇ”иѕѓгЂ‚и¦Ѓе€¤ж–­дё¤дёЄmapжЇеђ¦еЊ…еђ«з›ёеђЊзљ„keyе’ЊvalueпјЊж€‘д»¬еї…йЎ»йЂљиї‡дёЂдёЄеѕЄзЋЇе®ћзЋ°.
е¦‚жћњз»“жћ„дЅ“зљ„е…ЁйѓЁж€ђе‘йѓЅжЇеЏЇд»ҐжЇ”иѕѓзљ„пјЊй‚Јд№€з»“жћ„дЅ“д№џжЇеЏЇд»ҐжЇ”иѕѓзљ„пјЊй‚Јж ·зљ„иЇќдё¤дёЄз»“жћ„дЅ“е°†еЏЇд»ҐдЅїз”Ё==ж€–!=иїђз®—з¬¦иї›иЎЊжЇ”иѕѓ.
GoиЇ­иЁЂжњ‰дёЂдёЄз‰№жЂ§и®©ж€‘д»¬еЏЄеЈ°жЋдёЂдёЄж€ђе‘еЇ№еє”зљ„ж•°жЌ®з±»ећ‹иЂЊдёЌжЊ‡еђЌж€ђе‘зљ„еђЌе­—пј›иї™з±»ж€ђе‘е°±еЏ«еЊїеђЌж€ђе‘гЂ‚еЊїеђЌж€ђе‘зљ„ж•°жЌ®з±»ећ‹еї…йЎ»жЇе‘ЅеђЌзљ„з±»ећ‹ж€–жЊ‡еђ‘дёЂдёЄе‘ЅеђЌзљ„з±»ећ‹зљ„жЊ‡й’€гЂ‚дё‹йќўзљ„д»Јз Ѓдё­пјЊCircleе’ЊWheelеђ„и‡ЄйѓЅжњ‰дёЂдёЄеЊїеђЌж€ђе‘гЂ‚ж€‘д»¬еЏЇд»ҐиЇґPointз±»ећ‹иў«еµЊе…Ґе€°дє†Circleз»“жћ„дЅ“пјЊеђЊж—¶Circleз±»ећ‹иў«еµЊе…Ґе€°дє†Wheelз»“жћ„дЅ“гЂ‚</p>

<pre><span class="kwd">type</span> <span class="typ">Circle</span> <span class="kwd">struct</span> <span class="pun">{</span>
<span class="typ">Point</span>
<span class="typ">Radius</span> <span class="kwd">int</span>
<span class="pun">}</span>
<span class="kwd">type</span> <span class="typ">Wheel</span> <span class="kwd">struct</span> <span class="pun">{</span>
<span class="typ">Circle</span>
<span class="typ">Spokes</span> <span class="kwd">int</span>
<span class="pun">}</span>
</pre>

<p>еѕ—з›ЉдєЋеЊїеђЌеµЊе…Ґзљ„з‰№жЂ§пјЊж€‘д»¬еЏЇд»Ґз›ґжЋҐи®їй—®еЏ¶е­ђе±ћжЂ§иЂЊдёЌйњЂи¦Ѓз»™е‡єе®Њж•ґзљ„и·Їеѕ„пјљ</p>

<pre><span class="kwd">var</span> <span class="pln">w</span> <span class="typ">Wheel</span>
<span class="pln">w</span><span class="pun">.</span><span class="typ">X</span> <span class="pun">=</span> <span class="dec">8</span> <span class="com">// equivalent to w.Circle.Point.X = 8</span>
<span class="pln">w</span><span class="pun">.</span><span class="typ">Y</span> <span class="pun">=</span> <span class="dec">8</span> <span class="com">// equivalent to w.Circle.Point.Y = 8</span>
<span class="pln">w</span><span class="pun">.</span><span class="typ">Radius</span> <span class="pun">=</span> <span class="dec">5</span> <span class="com">// equivalent to w.Circle.Radius = 5</span>
<span class="pln">w</span><span class="pun">.</span><span class="typ">Spokes</span> <span class="pun">=</span> <span class="dec">20</span>
</pre>

<p>дёєд»Ђд№€и¦ЃеµЊе…ҐдёЂдёЄжІЎжњ‰д»»дЅ•е­ђж€ђе‘з±»ећ‹зљ„еЊїеђЌж€ђе‘з±»ећ‹е‘ўпјџз­”жЎ€жЇ<code>еЊїеђЌз±»ећ‹зљ„ж–№жі•й›†</code>гЂ‚з®Ђзџ­зљ„з‚№иїђз®—з¬¦иЇ­жі•еЏЇд»Ґз”ЁдєЋйЂ‰ж‹©еЊїеђЌж€ђе‘еµЊеҐ—зљ„ж€ђе‘пјЊ<strong>д№џеЏЇд»Ґз”ЁдєЋи®їй—®е®ѓд»¬зљ„ж–№жі•</strong>гЂ‚е®ћй™…дёЉпјЊе¤–е±‚зљ„з»“жћ„дЅ“дёЌд»…д»…жЇиЋ·еѕ—дє†еЊїеђЌж€ђе‘з±»ећ‹зљ„ж‰Ђжњ‰ж€ђе‘пјЊиЂЊдё”д№џиЋ·еѕ—дє†иЇҐз±»ећ‹еЇје‡єзљ„е…ЁйѓЁзљ„ж–№жі•гЂ‚иї™дёЄжњєе€¶еЏЇд»Ґз”ЁдєЋе°†дёЂдёЄжњ‰з®ЂеЌ•иЎЊдёєзљ„еЇ№и±Ўз»„еђ€ж€ђжњ‰е¤Ќжќ‚иЎЊдёєзљ„еЇ№и±ЎгЂ‚<strong>з»„еђ€</strong>жЇGoиЇ­иЁЂдё­йќўеђ‘еЇ№и±Ўзј–зЁ‹зљ„ж ёеїѓ.</p>

                </div>
                <a class="ui large button" href="/2016/12/07/%e3%80%8aGo%e8%af%ad%e8%a8%80%e5%9c%a3%e7%bb%8f%e3%80%8b%e5%ad%a6%e4%b9%a0%e5%b0%8f%e8%ae%b0%ef%bc%881%ef%bc%89">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">иї™жЇе€†з•Њзєїе“¦~~</a>
                </h4>
                
                <h3 class="ui header">Error handling and Go (зї»иЇ‘)</h3>
                <div class="postContent">
                    <p>жњ¬зЇ‡ж–‡з« жќҐи‡ЄгЂЉThe Go BlogгЂ‹гЂ‚ж–‡з« ењ°еќЂдёє<a href="https://blog.golang.org/error-handling-and-go">https://blog.golang.org/error-handling-and-go</a>
дё‹йќўжЇењЁдё‹зљ„зї»иЇ‘гЂ‚е› дёєзњ‹и‹±ж–‡зњ‹е®Ње°±еїпјЊж‰Ђд»Ґзї»иЇ‘зї»иЇ‘пјЊиЃЉд»Ґи‡Єж…°гЂ‚</p>

<h2>й”™иЇЇе¤„зђ†е’ЊGo</h2>

<p>2011е№ґ7жњ€12ж—Ґ</p>

<h3>еј•иЁЂ</h3>

<p>е¦‚жћњдЅ е†™иї‡Goзљ„д»Јз ЃпјЊдЅ еЏЇиѓЅе·Із»ЏйЃ‡е€°дє†е†…зЅ®зљ„errorз±»ећ‹гЂ‚Goзљ„д»Јз ЃдЅїз”ЁerrorиЎЁз¤єеј‚еёёзЉ¶жЂЃгЂ‚дѕ‹е¦‚os.Openе‡Ѕж•°ж‰“ејЂж–‡д»¶е¤±иґҐзљ„ж—¶еЂ™пјЊиї”е›ћдёЂдёЄдёЌдёєnilзљ„errorеЂјгЂ‚</p>

<pre><span class="kwd">func</span> <span class="typ">Open</span><span class="pun">(</span><span class="pln">name</span> <span class="pln">string</span><span class="pun">)</span> <span class="pun">(</span><span class="pln">file</span> <span class="pun">*</span><span class="typ">File</span><span class="pun">,</span> <span class="pln">err</span> <span class="pln">error</span><span class="pun">)</span>
</pre>

<p>дё‹йќўзљ„д»Јз ЃдЅїз”Ёos.Openж‰“ејЂдёЂдёЄж–‡д»¶гЂ‚е¦‚жћње‡єзЋ°дёЂдёЄerror,е®ѓдјљи°ѓз”Ёlog.FatalжќҐж‰“еЌ°е‡єй”™иЇЇз»“жќџгЂ‚</p>

<pre><span class="pln">f</span><span class="pun">,</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">os</span><span class="pun">.</span><span class="typ">Open</span><span class="pun">(</span><span class="str">&#34;filename.ext&#34;</span><span class="pun">)</span>
<span class="kwd">if</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
    <span class="pln">log</span><span class="pun">.</span><span class="typ">Fatal</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span>
<span class="pun">}</span>
<span class="com">// do something with the open *File f</span>
</pre>

<p>ењЁGoдё­пјЊдЅ д»…йњЂи¦ЃзџҐйЃ“иї™дє›е…ідєЋerrorз±»ећ‹зљ„зџҐиЇ†пјЊе°±иѓЅеЃљеѕ€е¤љдє‹жѓ…дє†пјЊдЅ†жЇењЁиї™зЇ‡ж–‡з« дё­ж€‘д»¬е°†д»”з»†з ”з©¶errorпјЊе№¶и®Ёи®єењЁGoдё­зљ„дёЂдє›еҐЅзљ„й”™иЇЇе¤„зђ†зљ„е®ћдѕ‹
<!-- more --></p>

<h3>error з±»ећ‹</h3>

<p>errorз±»ећ‹жЇдёЂдёЄжЋҐеЏЈ(interface)з±»ећ‹гЂ‚дёЂдёЄerrorеЏй‡Џд»ЈиЎЁд»»ж„ЏдёЂдёЄиѓЅе°†и‡Єе·±жЏЏз»ж€ђе­—з¬¦дёІзљ„еЂјгЂ‚
иї™дёЄжЇжЋҐеЏЈзљ„е®љд№‰</p>

<pre><span class="kwd">type</span> <span class="pln">error</span> <span class="kwd">interface</span> <span class="pun">{</span>
    <span class="typ">Error</span><span class="pun">(</span><span class="pun">)</span> <span class="pln">string</span>
<span class="pun">}</span>
</pre>

<p>errorз±»ећ‹е¦‚еђЊе…¶д»–ж‰Ђжњ‰е†…зЅ®з±»ећ‹жЇењЁuniverse block(<a href="https://golang.org/ref/spec#Blocks">The universe block encompasses all Go source text.</a>)дё­йў„еЈ°жЋпј€<a href="https://golang.org/ref/spec#Predeclared_identifiers">predeclare</a>пј‰зљ„гЂ‚
жњЂеёёдЅїз”Ёзљ„errorе®ћдѕ‹жЇerrorеЊ…дё­жњЄеЇје‡єпј€exportпј‰зљ„errorStringз±»ећ‹гЂ‚</p>

<pre><span class="com">// errorString is a trivial implementation of error.</span>
<span class="kwd">type</span> <span class="pln">errorString</span> <span class="kwd">struct</span> <span class="pun">{</span>
    <span class="pln">s</span> <span class="pln">string</span>
<span class="pun">}</span>

<span class="kwd">func</span> <span class="pun">(</span><span class="pln">e</span> <span class="pun">*</span><span class="pln">errorString</span><span class="pun">)</span> <span class="typ">Error</span><span class="pun">(</span><span class="pun">)</span> <span class="pln">string</span> <span class="pun">{</span>
    <span class="kwd">return</span> <span class="pln">e</span><span class="pun">.</span><span class="pln">s</span>
<span class="pun">}</span>
</pre>

<p>дЅ еЏЇд»ҐдЅїз”Ёerrors.Newе‡Ѕж•°жќҐжћ„е»єдёЂдёЄиї™ж ·зљ„еЂјгЂ‚е®ѓжЋҐеЏ—дёЂдёЄе­—з¬¦дёІпјЊе°†д№‹иЅ¬ж€ђerrors.errorStringпјЊе№¶иї”е›ћerrorеЂј</p>

<pre><span class="com">// New returns an error that formats as the given text.</span>
<span class="kwd">func</span> <span class="typ">New</span><span class="pun">(</span><span class="pln">text</span> <span class="pln">string</span><span class="pun">)</span> <span class="pln">error</span> <span class="pun">{</span>
    <span class="kwd">return</span> <span class="pun">&amp;</span><span class="pln">errorString</span><span class="pun">{</span><span class="pln">text</span><span class="pun">}</span>
<span class="pun">}</span>
</pre>

<p>иї™жЇдЅ еЏЇиѓЅдјљдЅїз”Ёзљ„errors.Newзљ„жѓ…е†µпјљ</p>

<pre><span class="kwd">func</span> <span class="typ">Sqrt</span><span class="pun">(</span><span class="pln">f</span> <span class="kwd">float64</span><span class="pun">)</span> <span class="pun">(</span><span class="kwd">float64</span><span class="pun">,</span> <span class="pln">error</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="kwd">if</span> <span class="pln">f</span> <span class="pun">&lt;</span> <span class="dec">0</span> <span class="pun">{</span>
        <span class="kwd">return</span> <span class="dec">0</span><span class="pun">,</span> <span class="pln">errors</span><span class="pun">.</span><span class="typ">New</span><span class="pun">(</span><span class="str">&#34;math: square root of negative number&#34;</span><span class="pun">)</span>
    <span class="pun">}</span>
    <span class="com">// implementation</span>
<span class="pun">}</span>
</pre>

<p>дЅїз”ЁдёЂдёЄиґџж•°еЏ‚ж•°жќҐи°ѓз”ЁSqrtпјЊдјљеѕ—е€°дёЂдёЄйќћnilзљ„errorеЂјпј€е…·дЅ“зљ„иЎЁз¤єжЇдёЂдёЄerrors.errorStringеЂјпј‰гЂ‚и°ѓз”ЁиЂ…иѓЅйЂљиї‡<code>error</code>з±»ећ‹зљ„Errorж–№жі•иЋ·еЏ–й”™иЇЇе­—з¬¦дёІ(вЂњmath: square root ofвЂ¦вЂњ)пјЊж€–иЂ…е°±з›ґжЋҐиѕ“е‡єе®ѓпјљ</p>

<pre><span class="pln">f</span><span class="pun">,</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="typ">Sqrt</span><span class="pun">(</span><span class="pun">-</span><span class="dec">1</span><span class="pun">)</span>
<span class="kwd">if</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
    <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Println</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span>
<span class="pun">}</span>
</pre>

<p>fmtеЊ…йЂљиї‡и°ѓз”Ёе®ѓзљ„Error()ж–№жі•ж јејЏеЊ–errorз±»ећ‹зљ„еЂјгЂ‚
иї™дёЄжЇй”™иЇЇзљ„е®ћзЋ°жЂ»з»“дёЉдё‹ж–‡зљ„ж–№жі•гЂ‚й”™иЇЇеє”иЇҐз”±os.Openж јејЏеЊ–иї”е›ћдёєвЂќopen /etc/passwd: permission denied,вЂќ ,иЂЊдёЌд»…д»…жЇвЂќpermission denied.вЂњз”±Sqrtиї”е›ћзљ„й”™иЇЇзјєе°‘дє†е…ідєЋж— ж•€еЏ‚ж•°зљ„дїЎжЃЇгЂ‚
ењЁfmtеЊ…дё­жњ‰дёЄжњ‰з”Ёзљ„е‡Ѕж•°Errorf,з”ЁдєЋеўћеЉ иї™дёЄдїЎжЃЇгЂ‚е®ѓж №жЌ® <code>Printf</code>и§„е€™жќҐж јејЏеЊ–е­—з¬¦дёІпјЊе№¶иї”е›ћдёЂдёЄз”±errors.Newе€›е»єзљ„errorз±»ећ‹гЂ‚</p>

<pre><span class="kwd">if</span> <span class="pln">f</span> <span class="pun">&lt;</span> <span class="dec">0</span> <span class="pun">{</span>
    <span class="kwd">return</span> <span class="dec">0</span><span class="pun">,</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Errorf</span><span class="pun">(</span><span class="str">&#34;math: square root of negative number %g&#34;</span><span class="pun">,</span> <span class="pln">f</span><span class="pun">)</span>
<span class="pun">}</span>
</pre>

<p>ењЁи®ёе¤љжѓ…е†µдё‹fmt.Errorfе·Із»Џи¶іе¤џ пјЊдЅ†жЇж—ўз„¶errorжЇдёЂдёЄinterfaceпјЊдЅ еЏЇд»ҐдЅїз”Ёд»»ж„Џзљ„ж•°жЌ®з»“жћ„дЅњдёєerrorпјЊи®©и°ѓз”ЁиЂ…жќҐжЈЂжџҐй”™иЇЇзљ„иЇ¦з»†дїЎжЃЇгЂ‚
дёѕдёЄдѕ‹е­ђпјЊж€‘д»¬еЃ‡жѓізљ„и°ѓз”Ёд№џи®ёжѓій‡Ќж–°дЅїз”Ёиї™дёЄж— ж•€еЏ‚ж•°жќҐи°ѓз”ЁSqrtгЂ‚ж€‘д»¬иѓЅйЂљиї‡е®љд№‰дёЂдёЄж–°зљ„errorзљ„е®ћзЋ°е®Њж€ђиї™дёЄз›®ж ‡пјЊиЂЊдёЌжЇдЅїз”Ёerrors.errorStringпјљ</p>

<pre><span class="kwd">type</span> <span class="typ">NegativeSqrtError</span> <span class="kwd">float64</span>

<span class="kwd">func</span> <span class="pun">(</span><span class="pln">f</span> <span class="typ">NegativeSqrtError</span><span class="pun">)</span> <span class="typ">Error</span><span class="pun">(</span><span class="pun">)</span> <span class="pln">string</span> <span class="pun">{</span>
    <span class="kwd">return</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Sprintf</span><span class="pun">(</span><span class="str">&#34;math: square root of negative number %g&#34;</span><span class="pun">,</span> <span class="kwd">float64</span><span class="pun">(</span><span class="pln">f</span><span class="pun">)</span><span class="pun">)</span>
<span class="pun">}</span>
</pre>

<p>е¤Ќжќ‚зљ„и°ѓз”ЁеЏЇд»ҐдЅїз”Ёз±»ећ‹ж–­иЁЂпј€<a href="https://golang.org/ref/spec#Type_assertions">type assertion</a>пј‰жќҐжЈЂжџҐNegativeSqrtErrorе№¶з‰№е€«е¤„зђ†пјЊеЅ“и°ѓз”ЁиЂ…е°†errorдј йЂ’з»™fmt.Printlnж€–иЂ…log.Fatalзљ„ж—¶еЂ™пјЊдёЌдјљжњ‰д»»дЅ•иЎЊдёєдёЉзљ„еЏеЊ–гЂ‚
е†ЌдёѕдёЄдѕ‹е­ђпјЊеЅ“json.Decodeе‡Ѕж•°и§ЈжћђдёЂдёЄJSON blobйЃ‡е€°иЇ­жі•й”™иЇЇж—¶пјЊиї”е›ћдёЂдёЄjsonеЊ…дё­‰д»»дЅ•иЎЊдёєдёЉзљ„еЏеЊ–гЂ‚
е†ЌдёѕдёЄдѕ‹е­ђпјЊеЅ“json.Decodeе‡Ѕж•°и§ЈжћђдёЂдёЄJSON blobйЃ‡е€°иЇ­жі•й”™иЇЇж—¶пјЊиї”е›ћдёЂдёЄjsonеЊ…дё­жЊ‡е®љзљ„SyntaxErrorз±»ећ‹гЂ‚</p>

<pre><span class="kwd">type</span> <span class="typ">SyntaxError</span> <span class="kwd">struct</span> <span class="pun">{</span>
    <span class="pln">msg</span>    <span class="pln">string</span> <span class="com">// description of error</span>
    <span class="typ">Offset</span> <span class="kwd">int64</span>  <span class="com">// error occurred after reading Offset bytes</span>
<span class="pun">}</span>

<span class="kwd">func</span> <span class="pun">(</span><span class="pln">e</span> <span class="pun">*</span><span class="typ">SyntaxError</span><span class="pun">)</span> <span class="typ">Error</span><span class="pun">(</span><span class="pun">)</span> <span class="pln">string</span> <span class="pun">{</span> <span class="kwd">return</span> <span class="pln">e</span><span class="pun">.</span><span class="pln">msg</span> <span class="pun">}</span>
</pre>

<p>Offsetе­—ж®µз”љи‡ідёЌдјљењЁerrorй»и®¤зљ„ж јејЏеЊ–дё­е‡єзЋ°пјЊдЅ†жЇи°ѓз”ЁиЂ…еЏЇд»ҐдЅїз”Ёе®ѓпјЊж·»еЉ ж–‡д»¶е’ЊиЎЊдїЎжЃЇе€°е€°errorж¶€жЃЇдё­гЂ‚</p>

<pre><span class="kwd">if</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">dec</span><span class="pun">.</span><span class="typ">Decode</span><span class="pun">(</span><span class="pun">&amp;</span><span class="pln">val</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
    <span class="kwd">if</span> <span class="pln">serr</span><span class="pun">,</span> <span class="pln">ok</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">err</span><span class="pun">.</span><span class="pun">(</span><span class="pun">*</span><span class="pln">json</span><span class="pun">.</span><span class="typ">SyntaxError</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">ok</span> <span class="pun">{</span>
        <span class="pln">line</span><span class="pun">,</span> <span class="pln">col</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">findLine</span><span class="pun">(</span><span class="pln">f</span><span class="pun">,</span> <span class="pln">serr</span><span class="pun">.</span><span class="typ">Offset</span><span class="pun">)</span>
        <span class="kwd">return</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Errorf</span><span class="pun">(</span><span class="str">&#34;%s:%d:%d: %v&#34;</span><span class="pun">,</span> <span class="pln">f</span><span class="pun">.</span><span class="typ">Name</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span> <span class="pln">line</span><span class="pun">,</span> <span class="pln">col</span><span class="pun">,</span> <span class="pln">err</span><span class="pun">)</span>
    <span class="pun">}</span>
    <span class="kwd">return</span> <span class="pln">err</span>
<span class="pun">}</span>
</pre>

<p>пј€иї™жЇжќҐи‡ЄCamlistoreйЎ№з›®зљ„зњџе®ћд»Јз Ѓзљ„зњЃз•Ґзљ„з®ЂеЊ–з‰€жњ¬пј‰
errorжЋҐеЏЈд»…д»…йњЂи¦ЃErrorж–№жі•пј›з‰№ж®Љзљ„errorе®ћзЋ°еЏЇиѓЅйњЂи¦Ѓе…¶д»–зљ„ж–№жі•гЂ‚дѕ‹е¦‚пјЊnetеЊ…дё­иї”е›ћerrorз±»ећ‹зљ„й”™иЇЇпјЊйЃµеѕЄдє†йЂљеёёзљ„жѓЇдѕ‹пјЊдЅ†жЇдёЂдє›errorзљ„е®ћзЋ°йЂљиї‡net.ErrorжЋҐеЏЈе®љд№‰дє†е…¶д»–ж–№жі•пјљ</p>

<pre><span class="kwd">package</span> <span class="pln">net</span>

<span class="kwd">type</span> <span class="typ">Error</span> <span class="kwd">interface</span> <span class="pun">{</span>
    <span class="pln">error</span>
    <span class="typ">Timeout</span><span class="pun">(</span><span class="pun">)</span> <span class="kwd">bool</span>   <span class="com">// Is the error a timeout?</span>
    <span class="typ">Temporary</span><span class="pun">(</span><span class="pun">)</span> <span class="kwd">bool</span> <span class="com">// Is the error temporary?</span>
<span class="pun">}</span>
</pre>

<p>е®ўж€·з«Їд»Јз ЃеЏЇд»ҐдЅїз”Ёз±»ећ‹ж–­иЁЂпј€type assertionпј‰жќҐжµ‹иЇ•пјЊз„¶еђЋд»Ћж°ёд№…жЂ§й”™иЇЇдё­еЊєе€†зџ­жљ‚зљ„зљ„зЅ‘з»њй”™иЇЇгЂ‚дѕ‹е¦‚пјЊдёЂдёЄзЅ‘з»њз€¬и™«д№џи®ёдјљдј‘зњ е№¶й‡ЌиЇ•еЅ“е®ѓйЃ‡е€°дёЂдёЄй›¶ж—¶жЂ§й”™иЇЇе№¶ж”ѕејѓе…¶д»–зљ„гЂ‚</p>

<pre><span class="kwd">if</span> <span class="pln">nerr</span><span class="pun">,</span> <span class="pln">ok</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">err</span><span class="pun">.</span><span class="pun">(</span><span class="pln">net</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">ok</span> <span class="pun">&amp;</span><span class="pun">&amp;</span> <span class="pln">nerr</span><span class="pun">.</span><span class="typ">Temporary</span><span class="pun">(</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="pln">time</span><span class="pun">.</span><span class="typ">Sleep</span><span class="pun">(</span><span class="dec">1e9</span><span class="pun">)</span>
    <span class="kwd">continue</span>
<span class="pun">}</span>
<span class="kwd">if</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
    <span class="pln">log</span><span class="pun">.</span><span class="typ">Fatal</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span>
<span class="pun">}</span>
</pre>

<h3>з®ЂеЊ–й‡Ќе¤Ќзљ„й”™иЇЇе¤„зђ†</h3>

<p>ењЁGoдё­пјЊй”™иЇЇе¤„зђ†йќћеёёй‡Ќи¦ЃгЂ‚иЇ­иЁЂзљ„и®ѕи®Ўе’Њзє¦е®љйј“еЉ±дЅ ењЁеЏ‘з”џй”™иЇЇзљ„ж—¶еЂ™жЋзЎ®жЈЂжџҐй”™иЇЇпј€е’Ње…¶д»–иЇ­иЁЂдЅїз”ЁжЉ›е‡єй”™иЇЇе№¶иЋ·еЏ–й”™иЇЇпј€ throwing exceptions and sometimes catching them пј‰зљ„жѓЇдѕ‹дёЌдёЂж ·пј‰гЂ‚ењЁжњ‰дє›жѓ…е†µдё‹пјЊиї™дЅїдЅ зљ„Goд»Јз Ѓе†—дЅ™пјЊдЅ†жЇе№ёиїђзљ„жЇпјЊдЅ еЏЇд»ҐдЅїз”ЁдёЂдє›жЉЂе·§жќҐжњЂе°‘зљ„й‡Ќе¤Ќй”™иЇЇе¤„зђ†гЂ‚
жЂќиЂѓдёЂдёЄдЅїз”ЁHTTPе¤„зђ†е™Ёзљ„App Engineеє”з”ЁпјЊд»Ћж•°жЌ®еє“дё­жЈЂзґўдёЂжќЎи®°еЅ•е№¶дЅїз”ЁжЁЎжќїж јејЏеЊ–гЂ‚</p>

<pre><span class="kwd">func</span> <span class="pln">init</span><span class="pun">(</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="pln">http</span><span class="pun">.</span><span class="typ">HandleFunc</span><span class="pun">(</span><span class="str">&#34;/view&#34;</span><span class="pun">,</span> <span class="pln">viewRecord</span><span class="pun">)</span>
<span class="pun">}</span>

<span class="kwd">func</span> <span class="pln">viewRecord</span><span class="pun">(</span><span class="pln">w</span> <span class="pln">http</span><span class="pun">.</span><span class="typ">ResponseWriter</span><span class="pun">,</span> <span class="pln">r</span> <span class="pun">*</span><span class="pln">http</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="pln">c</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">appengine</span><span class="pun">.</span><span class="typ">NewContext</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span>
    <span class="pln">key</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">datastore</span><span class="pun">.</span><span class="typ">NewKey</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span> <span class="str">&#34;Record&#34;</span><span class="pun">,</span> <span class="pln">r</span><span class="pun">.</span><span class="typ">FormValue</span><span class="pun">(</span><span class="str">&#34;id&#34;</span><span class="pun">)</span><span class="pun">,</span> <span class="dec">0</span><span class="pun">,</span> <span class="kwd">nil</span><span class="pun">)</span>
    <span class="pln">record</span> <span class="pun">:</span><span class="pun">=</span> <span class="kwd">new</span><span class="pun">(</span><span class="typ">Record</span><span class="pun">)</span>
    <span class="kwd">if</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">datastore</span><span class="pun">.</span><span class="typ">Get</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span> <span class="pln">key</span><span class="pun">,</span> <span class="pln">record</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
        <span class="pln">http</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">err</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span> <span class="dec">500</span><span class="pun">)</span>
        <span class="kwd">return</span>
    <span class="pun">}</span>
    <span class="kwd">if</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">viewTemplate</span><span class="pun">.</span><span class="typ">Execute</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">record</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
        <span class="pln">http</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">err</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span> <span class="dec">500</span><span class="pun">)</span>
    <span class="pun">}</span>
<span class="pun">}</span>
</pre>

<p>иї™дёЄе‡Ѕж•°е¤„зђ†з”±datastore.Getе‡Ѕж•°е’Њ<code>viewTemplate</code>зљ„Executeж–№жі•дє§з”џзљ„й”™иЇЇгЂ‚ењЁиї™дё¤дёЄй”™иЇЇдё­пјЊе®ѓз”ЁHTTPзЉ¶жЂЃз Ѓ500(вЂњInternal Server ErrorвЂќ)жќҐеђ‘з”Ёж€·е±•зЋ°дёЂдёЄз®ЂеЌ•зљ„й”™иЇЇдїЎжЃЇгЂ‚иї™ж®µд»Јз Ѓзњ‹иµ·жќҐжЇеЏЇз®Ўзђ†зљ„пјЊдЅ†жЇж·»еЉ дє†е¤љдЅ™зљ„HTTPе¤„зђ†е™ЁпјЊе№¶д»Ґи®ёе¤љз›ёеђЊзљ„й”™иЇЇе¤„зђ†д»Јз Ѓз»“жќџгЂ‚
дёєдє†е‡Џе°‘й‡Ќе¤ЌпјЊж€‘д»¬еЏЇд»Ґе®љд№‰ж€‘д»¬и‡Єе·±зљ„HTTP appHandlerз±»ећ‹жќҐеЊ…еђ«errorе№¶иї”е›ћеЂјгЂ‚</p>

<pre><span class="kwd">type</span> <span class="pln">appHandler</span> <span class="kwd">func</span><span class="pun">(</span><span class="pln">http</span><span class="pun">.</span><span class="typ">ResponseWriter</span><span class="pun">,</span> <span class="pun">*</span><span class="pln">http</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">)</span> <span class="pln">error</span>
</pre>

<p>з„¶еђЋпјЊж€‘д»¬дї®ж”№ж€‘д»¬зљ„viewRecord е‡Ѕж•°жќҐиї”е›ћй”™иЇЇпјљ</p>

<pre><span class="kwd">func</span> <span class="pln">viewRecord</span><span class="pun">(</span><span class="pln">w</span> <span class="pln">http</span><span class="pun">.</span><span class="typ">ResponseWriter</span><span class="pun">,</span> <span class="pln">r</span> <span class="pun">*</span><span class="pln">http</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">)</span> <span class="pln">error</span> <span class="pun">{</span>
    <span class="pln">c</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">appengine</span><span class="pun">.</span><span class="typ">NewContext</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span>
    <span class="pln">key</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">datastore</span><span class="pun">.</span><span class="typ">NewKey</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span> <span class="str">&#34;Record&#34;</span><span class="pun">,</span> <span class="pln">r</span><span class="pun">.</span><span class="typ">FormValue</span><span class="pun">(</span><span class="str">&#34;id&#34;</span><span class="pun">)</span><span class="pun">,</span> <span class="dec">0</span><span class="pun">,</span> <span class="kwd">nil</span><span class="pun">)</span>
    <span class="pln">record</span> <span class="pun">:</span><span class="pun">=</span> <span class="kwd">new</span><span class="pun">(</span><span class="typ">Record</span><span class="pun">)</span>
    <span class="kwd">if</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">datastore</span><span class="pun">.</span><span class="typ">Get</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span> <span class="pln">key</span><span class="pun">,</span> <span class="pln">record</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
        <span class="kwd">return</span> <span class="pln">err</span>
    <span class="pun">}</span>
    <span class="kwd">return</span> <span class="pln">viewTemplate</span><span class="pun">.</span><span class="typ">Execute</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">record</span><span class="pun">)</span>
<span class="pun">}</span>
</pre>

<p>иї™е’ЊеЋџе§‹зљ„з‰€жњ¬з›ёдјјпјЊдЅ†жЇhttpеЊ…дёЌиѓЅзђ†и§Јиї”е›ћerrorзљ„е‡Ѕж•°гЂ‚дёєдє†дї®ж­ЈпјЊж€‘д»¬ењЁappHandlerдёЉе®ћзЋ°дє†http.HandlerжЋҐеЏЈзљ„ServeHTTPж–№жі•пјљ</p>

<pre><span class="kwd">func</span> <span class="pun">(</span><span class="pln">fn</span> <span class="pln">appHandler</span><span class="pun">)</span> <span class="typ">ServeHTTP</span><span class="pun">(</span><span class="pln">w</span> <span class="pln">http</span><span class="pun">.</span><span class="typ">ResponseWriter</span><span class="pun">,</span> <span class="pln">r</span> <span class="pun">*</span><span class="pln">http</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="kwd">if</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">fn</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">r</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
        <span class="pln">http</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">err</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span> <span class="dec">500</span><span class="pun">)</span>
    <span class="pun">}</span>
<span class="pun">}</span>
</pre>

<p>ServeHTTPж–№жі•и°ѓз”ЁappHandlerе‡Ѕж•°е№¶дё”еђ‘з”Ёж€·жѕз¤єй”™иЇЇпј€е¦‚жћњжњ‰зљ„иЇќпј‰гЂ‚жіЁж„Џиї™дёЄж–№жі•зљ„жЋҐж”¶иЂ…пјЊfnпјЊжЇдёЂдёЄе‡Ѕж•°гЂ‚пј€GoеЏЇд»Ґиї™ж ·еЃљпјЃпј‰ж–№жі•и°ѓз”Ёе‡Ѕж•°йЂљиї‡и°ѓз”ЁиЎЁиѕѕејЏfn(w, r)дё­зљ„жЋҐж”¶иЂ…гЂ‚
зЋ°ењЁпјЊеЅ“дЅїз”ЁhttpеЊ…жіЁе†ЊviewRecordзљ„ж—¶еЂ™пјЊж€‘д»¬дЅїз”ЁHandleе‡Ѕж•°пј€иЂЊдёЌжЇHandleFuncпј‰appHandlerдЅњдёєhttp.Handlerпј€иЂЊдёЌжЇhttp.HandlerFuncпј‰</p>

<pre><span class="kwd">func</span> <span class="pln">init</span><span class="pun">(</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="pln">http</span><span class="pun">.</span><span class="typ">Handle</span><span class="pun">(</span><span class="str">&#34;/view&#34;</span><span class="pun">,</span> <span class="pln">appHandler</span><span class="pun">(</span><span class="pln">viewRecord</span><span class="pun">)</span><span class="pun">)</span>
<span class="pun">}</span>
</pre>

<p>йЂљиї‡еџєжњ¬жћ¶жћ„дё­зљ„й”™иЇЇе¤„зђ†пјЊж€‘д»¬еЏЇд»ҐдЅїе®ѓж›ґеЉ зљ„з”Ёж€·еЏ‹еҐЅгЂ‚з›ёжЇ”д»…д»…е±•з¤єй”™иЇЇзљ„е­—з¬¦дёІпјЊж›ґеҐЅзљ„ж–№жі•жЇз»™з”Ёж€·з®ЂеЌ•зљ„й”™иЇЇж¶€жЃЇе№¶й™„еЉ йЂ‚еђ€зљ„HTTPзЉ¶жЂЃз ЃпјЊеђЊж—¶ењЁApp EngineејЂеЏ‘иЂ…жЋ§е€¶еЏ°и®°еЅ•е®Њж•ґзљ„й”™иЇЇз”ЁдєЋи°ѓиЇ•гЂ‚
дёєдє†еЃље€°иї™з‚№пјЊж€‘д»¬е€›е»єдёЂдёЄappError з»“жћ„дЅ“пјЊеЊ…еђ«дёЂдёЄerrorз±»ећ‹е’ЊдёЂдє›е…¶д»–е­—ж®µ</p>

<pre><span class="kwd">type</span> <span class="pln">appError</span> <span class="kwd">struct</span> <span class="pun">{</span>
    <span class="typ">Error</span>   <span class="pln">error</span>
    <span class="typ">Message</span> <span class="pln">string</span>
    <span class="typ">Code</span>    <span class="kwd">int</span>
<span class="pun">}</span>
</pre>

<p>жЋҐдё‹жќҐпјЊж€‘д»¬дї®ж”№appHandlerз±»ећ‹д»Ґдѕїиї”е›ћ*appErrorеЂјпјљ</p>

<pre><span class="kwd">type</span> <span class="pln">appHandler</span> <span class="kwd">func</span><span class="pun">(</span><span class="pln">http</span><span class="pun">.</span><span class="typ">ResponseWriter</span><span class="pun">,</span> <span class="pun">*</span><span class="pln">http</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">)</span> <span class="pun">*</span><span class="pln">appError</span>
</pre>

<p>пј€йЂљеёёпјЊдёЌдЅїз”ЁerrorпјЊиЂЊжЇдЅїз”Ёе…·дЅ“зљ„errorз±»ећ‹иї›иЎЊдј йЂ’зљ„еЃљжі•жЇй”™иЇЇзљ„пјЊеЋџе› дјљењЁ<a href="https://golang.org/doc/faq#nil_error">Go FAQ</a>дё­и®Ёи®єпјЊдёЌиї‡ењЁиї™й‡ЊжЇж­ЈзЎ®зљ„пјЊе› дёєServeHTTPжЇе”ЇдёЂзњ‹е€°иї™дёЄеЂје№¶дё”дЅїз”Ёе…¶е†…е®№зљ„ењ°ж–№гЂ‚пј‰
 дёєдє†дЅї<code>appHandler</code>зљ„ServeHTTPж–№жі•еђ‘з”Ёж€·жѕз¤є<code>appError</code>зљ„ж¶€жЃЇе’Њж­ЈзЎ®зљ„HTTPзЉ¶жЂЃз ЃпјЊе№¶еђ‘ејЂеЏ‘иЂ…и®°еЅ•е®Њж•ґзљ„Errorпјљ</p>

<pre> <span class="kwd">func</span> <span class="pun">(</span><span class="pln">fn</span> <span class="pln">appHandler</span><span class="pun">)</span> <span class="typ">ServeHTTP</span><span class="pun">(</span><span class="pln">w</span> <span class="pln">http</span><span class="pun">.</span><span class="typ">ResponseWriter</span><span class="pun">,</span> <span class="pln">r</span> <span class="pun">*</span><span class="pln">http</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="kwd">if</span> <span class="pln">e</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">fn</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">r</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">e</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span> <span class="com">// e is *appError, not os.Error.</span>
        <span class="pln">c</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">appengine</span><span class="pun">.</span><span class="typ">NewContext</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span>
        <span class="pln">c</span><span class="pun">.</span><span class="typ">Errorf</span><span class="pun">(</span><span class="str">&#34;%v&#34;</span><span class="pun">,</span> <span class="pln">e</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">)</span>
        <span class="pln">http</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">e</span><span class="pun">.</span><span class="typ">Message</span><span class="pun">,</span> <span class="pln">e</span><span class="pun">.</span><span class="typ">Code</span><span class="pun">)</span>
    <span class="pun">}</span>
<span class="pun">}</span>
</pre>

<p>жњЂеђЋпјЊж€‘д»¬ж›ґж–°viewRecordе‡Ѕж•°пјЊе№¶дЅїе®ѓйЃ‡е€°й”™иЇЇзљ„ж—¶еЂ™иї”е›ћж›ґе¤љзљ„дёЉдё‹ж–‡пјљ</p>

<pre> <span class="kwd">func</span> <span class="pln">viewRecord</span><span class="pun">(</span><span class="pln">w</span> <span class="pln">http</span><span class="pun">.</span><span class="typ">ResponseWriter</span><span class="pun">,</span> <span class="pln">r</span> <span class="pun">*</span><span class="pln">http</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">)</span> <span class="pun">*</span><span class="pln">appError</span> <span class="pun">{</span>
    <span class="pln">c</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">appengine</span><span class="pun">.</span><span class="typ">NewContext</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span>
    <span class="pln">key</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">datastore</span><span class="pun">.</span><span class="typ">NewKey</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span> <span class="str">&#34;Record&#34;</span><span class="pun">,</span> <span class="pln">r</span><span class="pun">.</span><span class="typ">FormValue</span><span class="pun">(</span><span class="str">&#34;id&#34;</span><span class="pun">)</span><span class="pun">,</span> <span class="dec">0</span><span class="pun">,</span> <span class="kwd">nil</span><span class="pun">)</span>
    <span class="pln">record</span> <span class="pun">:</span><span class="pun">=</span> <span class="kwd">new</span><span class="pun">(</span><span class="typ">Record</span><span class="pun">)</span>
    <span class="kwd">if</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">datastore</span><span class="pun">.</span><span class="typ">Get</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span> <span class="pln">key</span><span class="pun">,</span> <span class="pln">record</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
        <span class="kwd">return</span> <span class="pun">&amp;</span><span class="pln">appError</span><span class="pun">{</span><span class="pln">err</span><span class="pun">,</span> <span class="str">&#34;Record not found&#34;</span><span class="pun">,</span> <span class="dec">404</span><span class="pun">}</span>
    <span class="pun">}</span>
    <span class="kwd">if</span> <span class="pln">err</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">viewTemplate</span><span class="pun">.</span><span class="typ">Execute</span><span class="pun">(</span><span class="pln">w</span><span class="pun">,</span> <span class="pln">record</span><span class="pun">)</span><span class="pun">;</span> <span class="pln">err</span> <span class="pun">!</span><span class="pun">=</span> <span class="kwd">nil</span> <span class="pun">{</span>
        <span class="kwd">return</span> <span class="pun">&amp;</span><span class="pln">appError</span><span class="pun">{</span><span class="pln">err</span><span class="pun">,</span> <span class="str">&#34;Can&#39;t display record&#34;</span><span class="pun">,</span> <span class="dec">500</span><span class="pun">}</span>
    <span class="pun">}</span>
    <span class="kwd">return</span> <span class="kwd">nil</span>
<span class="pun">}</span>
</pre>

<p>иї™дёЄз‰€жњ¬зљ„viewRecordе’ЊеЋџе§‹з‰€жњ¬зљ„зЁ‹еє¦з›ёеђЊпјЊдЅ†жЇзЋ°ењЁжЇЏдёЂиЎЊйѓЅжњ‰з‰№е€«зљ„ж„ЏжЂќпјЊе№¶дё”пјЊж€‘д»¬жЏђдѕ›ж›ґеЉ еЏ‹еҐЅзљ„з”Ёж€·дЅ“йЄЊгЂ‚
 иї™иїжІЎз»“жќџпј›ж€‘д»¬е°†дјљењЁж€‘д»¬зљ„еє”з”Ёдё­дјеЊ–й”™иЇЇе¤„зђ†гЂ‚дёЂдє›жѓіжі•пјљ
 - з»™дє€жЇЏдёЄй”™иЇЇе¤„зђ†дёЂдёЄжј‚дє®зљ„HTMLжЁЎжќї
 - еЅ“з”Ёж€·жЇз®Ўзђ†е‘ж—¶пјЊе°†stack traceе†™е€°HTTPе›ћеє”дё­пјЊдЅїdebugж›ґеЉ з®ЂеЌ•
 - дёєappErrorе†™дёЂдёЄжћ„е»єе‡Ѕж•°пјЊз”ЁдєЋе­е‚Ёstack traceпјЊд»Ґдѕїи°ѓиЇ•
 - ењЁappHandlerдё­еЏ‘з”џpanicж—¶recoverпјЊе°†й”™иЇЇдЅњдёєвЂњеЌ±й™©вЂќе†™е…ҐејЂеЏ‘иЂ…жЋ§е€¶еЏ°пјЊе№¶з”Ёж€·вЂњеЏ‘з”џдє†дёЂдёЄдёҐй‡Ќзљ„й”™иЇЇвЂќгЂ‚ иї™жЇйЃїе…Ќеђ‘з”Ёж€·жљґйњІз”±дєЋзј–зЁ‹й”™иЇЇеј•иµ·зљ„дёЌеЏЇйў„жµ‹зљ„й”™иЇЇзљ„дїЎжЃЇзљ„дёЂдёЄеѕ€еҐЅзљ„жѓіжі•гЂ‚еЏ‚зњ‹<a href="http://golang.org/doc/articles/defer_panic_recover.html">Defer, Panic, and Recover</a> ж–‡з« иЋ·еЏ–ж›ґе¤љз»†иЉ‚гЂ‚</p>

<h3>жЂ»з»“</h3>

<p>йЂ‚еђ€зљ„й”™иЇЇе¤„зђ†жЇдёЂдёЄеҐЅзљ„иЅЇд»¶зљ„еџєжњ¬йњЂж±‚гЂ‚ж №жЌ®жњ¬ж–‡ж‰Ђи®Ёи®єзљ„жЉЂжњЇпјЊдЅ еє”иЇҐиѓЅе¤џе†™е‡єж›ґеЏЇйќ дё”ж›ґз®ЂжґЃзљ„Goд»Јз Ѓ</p>

<p>Andrew Gerrand и‘—</p>

                </div>
                <a class="ui large button" href="/2016/12/05/Error%20handling%20and%20Go%20%28%e7%bf%bb%e8%af%91%29">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">иї™жЇе€†з•Њзєїе“¦~~</a>
                </h4>
                
                <h3 class="ui header">ж€‘зљ„Redisе€ќж¬Ўе®ћж€</h3>
                <div class="postContent">
                    <p>е› дёєеђ„з§ЌеЋџе› пјЊж€‘еї…йЎ»ењЁwindowsдёЉиї›иЎЊжњЌеЉЎе™ЁејЂеЏ‘пјЊж‰Ђд»Ґж€‘йњЂи¦ЃењЁwindowsдёЉиїђиЎЊredisпјЊеЌідЅїгЂЉredis in actionгЂ‹дёЉжЋзЎ®е†™зќЂдёЌжЋЁиЌђењЁwindowsдёЉдЅїз”ЁredisгЂ‚
ж€‘ењЁwindowsдёЉдЅїз”Ёзљ„redisжЇд»Ћ <a href="https://github.com/dmajkic/redis/downloads">https://github.com/dmajkic/redis/downloads</a> иЋ·еЏ–зљ„гЂ‚
ж€‘дЅїз”Ёredisзљ„жЎЊйќўе®ўж€·з«ЇдёєRedis Desktop ManagerгЂ‚дЅїз”Ёзљ„еЋџе› д»…д»…жЇз¬¬дёЂдёЄжђње€°зљ„е®ўж€·з«Їе°±жЇд»–дё”жІЎжњ‰и®©ж€‘и®ЁеЋЊзљ„ењ°ж–№пјЊе°±з»§з»­з”Ёдє†гЂ‚иЅЇд»¶ењ°еќЂ<a href="https://redisdesktop.com/downloadгЂ‚">https://redisdesktop.com/downloadгЂ‚</a>
жћЃеЉ›жЋЁиЌђгЂЉredisе®ћж€гЂ‹гЂ‚д»Ћз¬¬дёЂз« ејЂе§‹пјЊењЁд»‹з»Ќд»Ђд№€жЇredisпјЊжњ‰д»Ђд№€з”ЁпјЊдёЋе…¶д»–ж•°жЌ®еє“жњ‰д»Ђд№€еЊєе€«д№‹еђЋпјЊе°±ејЂе§‹д»ЋдёЂдёЄйЎ№з›®ејЂе§‹пјЊжј”з¤єе¦‚дЅ•дЅїз”ЁredisгЂ‚и®Ізљ„з¬¬дёЂдёЄйЎ№з›®жЇеЇ№ж–‡з« иї›иЎЊжЉ•зҐЁпјЊиї™и®©ж€‘зљ„е›ћеї†иµ·ж€‘зљ„е¤§е­¦зљ„з¬¬дёЂдёЄйЎ№з›®вЂ“дёЂдёЄжЉ•зҐЁзі»з»џзљ„е®ћзЋ°гЂ‚
<!-- more -->
ењЁзњ‹е®Њиї™дёЂз« д№‹еђЋпјЊж€‘еЇ№redisжњ‰дє†дёЄе€ќж­Ґдє†и§ЈпјЊе№¶е°†ењЁиї™дёЂз« е­¦е€°зљ„зџҐиЇ†пјЊиїђз”Ёе€°ж€‘зљ„е®ћй™…е·ҐдЅњзљ„дёЂдёЄе°ЏйЎ№з›®дё­пјљи§Јжћђзџ­дїЎе›ћж‰§зљ„xmlпјЊз»џи®Ўе›ћж‰§дё­зљ„дїЎжЃЇпјЊз»џи®Ўз”Ёж€·зљ„жџђдёЄжґ»еЉЁеЏ‘йЂЃзљ„зџ­дїЎеђ„з§ЌзЉ¶жЂЃзљ„ж•°з›®гЂ‚и§ЈжћђеђЋзљ„xmlж•°жЌ®е¤§и‡ґе¦‚дё‹</p>

<pre><span class="kwd">type</span> <span class="typ">Message</span> <span class="kwd">struct</span> <span class="pun">{</span>
    <span class="typ">PhoneNum</span>   <span class="pln">string</span>
    <span class="typ">State</span>      <span class="pln">string</span>
    <span class="typ">UserID</span>     <span class="kwd">int</span>
    <span class="typ">ActivityID</span> <span class="kwd">int</span>
<span class="pun">}</span>
</pre>

<p>жњ¬йЎ№з›®жЇи§ЈжћђдёЂдёЄxmlж–‡д»¶пјЊеѕ—е€°е…¶дё­зљ„дїЎжЃЇпјЊиї›иЎЊз»џи®ЎпјЊиї”е›ћз»џи®Ўзљ„з»“жћњгЂ‚жњ¬жќҐеЏЇд»Ґе°†ж•°жЌ®дЅїз”ЁMapе­е‚ЁењЁе†…е­дё­пјЊз­‰ж‰Ђжњ‰зљ„дїЎжЃЇз»џи®ЎеђЋпјЊе°†Mapдё­зљ„дїЎжЃЇиѕ“е‡єе°±еЏЇд»Ґдє†пјЊдЅ†жЇиї™дёЄйЎ№з›®д»ҐеђЋи¦Ѓж‰©е±•ж€ђпјЊйњЂи¦Ѓе°†е†…е­зљ„ж•°жЌ®иї›иЎЊжЊЃд№…еЊ–е¤„зђ†пјЊе®љж—¶иї‡жњџж•°жЌ®е’Ње¤љжњЌеЉЎе™Ёдё»д»ЋеђЊж­Ґж•°жЌ®пјЊж‰Ђд»ҐдЅїз”Ёredisж— з–‘жЇжњЂеҐЅзљ„йЂ‰ж‹©гЂ‚
ж€‘д»їйЂ гЂЉredisе®ћж€гЂ‹з¬¬дёЂз« зљ„зј–зЁ‹ж–№жі•пјЊеЇ№зЁ‹еєЏиї›иЎЊдє†ж”№йЂ гЂ‚и®ѕе®љдє†пјљ
- userй›†еђ€пјљ е­е‚ЁжЋҐж”¶е€°зљ„xmlдё­з”Ёж€·idзљ„й›†еђ€гЂ‚й›†еђ€е†…зљ„е…ѓзґ з±»дјј{1,2,3}
- user_x_acitvity: е­е‚Ёз”Ёж€·IDдёєxзљ„жґ»еЉЁidзљ„й›†еђ€пјЊuser_1_acitvityй›†еђ€е†…зљ„е…ѓзґ з±»дјј{1,2,3}
- user_x_acitvity_y: е­е‚Ёз”Ёж€·IDдёєxпјЊжґ»еЉЁIDдёєyзљ„ж‰‹жњєеЏ·з ЃдїЎжЃЇгЂ‚user_1_acitvity_1й›†еђ€е†…зљ„е…ѓзґ з±»дјј{вЂњ15952010343пјЊDELIVRDвЂќ}пјЊе…ѓзґ зљ„еЂјдёєвЂќphoneNum,statusвЂќзљ„з»„еђ€
йЂљиї‡userй›†еђ€ж‰ѕе€°жњ‰е“Єдє›з”Ёж€·ж”¶е€°дє†е›ћж‰§пјЊйЂљиї‡user_x_acitvityи®°еЅ•з”Ёж€·зљ„е“Єдє›жґ»еЉЁењЁе›ћж‰§зљ„и®°еЅ•дё­гЂ‚е№¶йЂљиї‡user_x_acitvity_yж‰ѕе€°е±ћдєЋж­¤жґ»еЉЁзљ„ж‰‹жњєеЏ·з Ѓзљ„зЉ¶жЂЃгЂ‚зњ‹е®ЊгЂЉredisе®ћж€гЂ‹з¬¬дёЂз« жњЂе¤§зљ„ж”¶иЋ·е°±жЇи®ѕе®љsetзљ„еђЌе­—гЂ‚еЏЇд»ҐйЂљиї‡и®ѕе®љsetд»Ґз‰№е®љзљ„еђЌе­—пјЊжќҐзґўеј•е€°з‰№е®љзљ„дїЎжЃЇгЂ‚
е…·дЅ“зљ„зЁ‹еєЏд»Јз ЃењЁпјљ<a href="https://github.com/qwendy/handleFeedback">https://github.com/qwendy/handleFeedback</a></p>

<pre><span class="kwd">func</span> <span class="pun">(</span><span class="pln">rc</span> <span class="pun">*</span><span class="pln">redisContainer</span><span class="pun">)</span> <span class="pln">pushYiMeiXMLData</span><span class="pun">(</span><span class="pln">message</span> <span class="typ">YiMeiMessage</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="pln">activityID</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">message</span><span class="pun">.</span><span class="typ">Seqid</span> <span class="pun">&gt;</span><span class="pun">&gt;</span> <span class="dec">16</span>
    <span class="pln">userID</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">message</span><span class="pun">.</span><span class="typ">Seqid</span> <span class="pun">-</span> <span class="pun">(</span><span class="pln">activityID</span> <span class="pun">&lt;</span><span class="pun">&lt;</span> <span class="dec">16</span><span class="pun">)</span>
    <span class="com">// з”Ёж€·зљ„й›†еђ€гЂ‚и®ѕзЅ®жЋҐж”¶е€°зљ„з”Ёж€·зљ„й›†еђ€</span>
    <span class="pln">rc</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">SAdd</span><span class="pun">(</span><span class="str">&#34;user&#34;</span><span class="pun">,</span> <span class="pln">userID</span><span class="pun">)</span>
    <span class="com">// и®ѕзЅ®жџђдёЄз”Ёж€·зљ„жґ»еЉЁй›†еђ€</span>
    <span class="pln">userActivitySet</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Sprintf</span><span class="pun">(</span><span class="str">&#34;user:%d&#34;</span><span class="pun">,</span> <span class="pln">userID</span><span class="pun">)</span>
    <span class="pln">rc</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">SAdd</span><span class="pun">(</span><span class="pln">userActivitySet</span><span class="pun">,</span> <span class="pln">activityID</span><span class="pun">)</span>
    <span class="com">// жґ»еЉЁзљ„ж‰‹жњєеЏ·з ЃзЉ¶жЂЃй›†еђ€</span>
    <span class="pln">activityPhoneSet</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Sprintf</span><span class="pun">(</span><span class="str">&#34;user_%d_activity_%d&#34;</span><span class="pun">,</span> <span class="pln">userID</span><span class="pun">,</span> <span class="pln">activityID</span><span class="pun">)</span>
    <span class="com">// ж‰‹жњєеЏ·з Ѓе’ЊзЉ¶жЂЃ</span>
    <span class="pln">phoneStatus</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Sprintf</span><span class="pun">(</span><span class="str">&#34;%s,%s&#34;</span><span class="pun">,</span> <span class="pln">message</span><span class="pun">.</span><span class="typ">PhoneNum</span><span class="pun">,</span> <span class="pln">message</span><span class="pun">.</span><span class="typ">State</span><span class="pun">)</span>
    <span class="pln">rc</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">SAdd</span><span class="pun">(</span><span class="pln">activityPhoneSet</span><span class="pun">,</span> <span class="pln">phoneStatus</span><span class="pun">)</span>
<span class="pun">}</span>

<span class="kwd">func</span> <span class="pun">(</span><span class="pln">rc</span> <span class="pun">*</span><span class="pln">redisContainer</span><span class="pun">)</span> <span class="typ">Print</span><span class="pun">(</span><span class="pun">)</span> <span class="pun">{</span>
    <span class="kwd">for</span> <span class="pln">_</span><span class="pun">,</span> <span class="pln">userID</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">range</span> <span class="pln">rc</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">SMembers</span><span class="pun">(</span><span class="str">&#34;user&#34;</span><span class="pun">)</span><span class="pun">.</span><span class="typ">Val</span><span class="pun">(</span><span class="pun">)</span> <span class="pun">{</span>
        <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Printf</span><span class="pun">(</span><span class="str">&#34;user:%s \n&#34;</span><span class="pun">,</span> <span class="pln">userID</span><span class="pun">)</span>
        <span class="pln">userActivitySet</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Sprintf</span><span class="pun">(</span><span class="str">&#34;user:%s&#34;</span><span class="pun">,</span> <span class="pln">userID</span><span class="pun">)</span>
        <span class="kwd">for</span> <span class="pln">_</span><span class="pun">,</span> <span class="pln">activityID</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">range</span> <span class="pln">rc</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">SMembers</span><span class="pun">(</span><span class="pln">userActivitySet</span><span class="pun">)</span><span class="pun">.</span><span class="typ">Val</span><span class="pun">(</span><span class="pun">)</span> <span class="pun">{</span>
            <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Printf</span><span class="pun">(</span><span class="str">&#34;activityID:%s  \n&#34;</span><span class="pun">,</span> <span class="pln">activityID</span><span class="pun">)</span>
            <span class="pln">activityPhoneSet</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Sprintf</span><span class="pun">(</span><span class="str">&#34;user_%s_activity_%s&#34;</span><span class="pun">,</span> <span class="pln">userID</span><span class="pun">,</span> <span class="pln">activityID</span><span class="pun">)</span>
            <span class="kwd">for</span> <span class="pln">_</span><span class="pun">,</span> <span class="pln">phoneStatus</span> <span class="pun">:</span><span class="pun">=</span> <span class="pln">range</span> <span class="pln">rc</span><span class="pun">.</span><span class="pln">client</span><span class="pun">.</span><span class="typ">SMembers</span><span class="pun">(</span><span class="pln">activityPhoneSet</span><span class="pun">)</span><span class="pun">.</span><span class="typ">Val</span><span class="pun">(</span><span class="pun">)</span> <span class="pun">{</span>
                <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Printf</span><span class="pun">(</span><span class="str">&#34;phoneStatus:%s  &#34;</span><span class="pun">,</span> <span class="pln">phoneStatus</span><span class="pun">)</span>
            <span class="pun">}</span>
            <span class="pln">fmt</span><span class="pun">.</span><span class="typ">Printf</span><span class="pun">(</span><span class="str">&#34;\n&#34;</span><span class="pun">)</span>
        <span class="pun">}</span>

    <span class="pun">}</span>
<span class="pun">}</span>
</pre>

<p>Val() {
                fmt.Printf(вЂњphoneStatus:%s  вЂњ, phoneStatus)
            }
            fmt.Printf(вЂќ\nвЂќ)
        }</p>

<pre><code>}
</code></pre>

<p>}
```</p>

                </div>
                <a class="ui large button" href="/2016/09/03/%e6%88%91%e7%9a%84Redis%e5%88%9d%e6%ac%a1%e5%ae%9e%e6%88%98">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">иї™жЇе€†з•Њзєїе“¦~~</a>
                </h4>
                
            </div>
        </div>


        <div class="ui inverted vertical footer segment">
            <div class="ui container">
                <div class="ui stackable inverted divided equal height stackable grid">
                    <div class="three wide column">
                        <h4 class="ui inverted header">About</h4>
                        <div class="ui inverted link list">
                            <a href="#" class="item">Sitemap</a>
                            <a href="#" class="item">Contact Us</a>
                            <a href="#" class="item">Religious Ceremonies</a>
                            <a href="#" class="item">Gazebo Plans</a>
                        </div>
                    </div>
                    <div class="three wide column">
                        <h4 class="ui inverted header">Services</h4>
                        <div class="ui inverted link list">
                            <a href="#" class="item">Banana Pre-Order</a>
                            <a href="#" class="item">DNA FAQ</a>
                            <a href="#" class="item">How To Access</a>
                            <a href="#" class="item">Favorite X-Men</a>
                        </div>
                    </div>
                    <div class="seven wide column">
                        <h4 class="ui inverted header">Footer Header</h4>
                        <p>Extra space for a call to action inside the footer that could help re-engage users.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>